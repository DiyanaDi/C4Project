<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="/styles/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!--<script src="js/script.js"></script>-->
    <title>Document</title>
</head>
<body>
    <div class="container-fluid">
        <!--HEADER START-->
        <nav class="navbar navbar-expand-lg bg-light ps-5 sticky">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <img src="/images/logo.png"
                    alt="Image not found!"
                    style="width:5rem;">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto pe-5">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Features</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Contacts</a>
                    </li>
                </ul>
            </div>
            </div>
        </nav>
        <!--HEADER END-->
        <div class="row m-10">
            <!--FILTER START-->
            <div id="filter-page" class="bg-light ms-5 sticky-2 d-flex flex-column align-items-center align-items-md-start justify-content-around p-3 height-22">
                <h3>Filters</h3>
                <div>
                    <div>Color:</div>

                    <label for="red">Red</label>
                    <input type="radio" id="red" name="color" value="red"> 

                    <label for="pink">Pink</label>
                    <input type="radio" id="pink" name="color" value="pink"> 

                    <label for="yellow">Yellow</label> 
                    <input type="radio" id="yellow" name="color" value="yellow"> 
                </div>
                <div>
                    <div>Price:</div>
                    <div class="row">
                        <div class="col-12">
                            <label for="priceFrom">From:</label>
                            <input type="number" id="priceFrom" name="priceFrom" class="form-control">
                        </div>
                        <div class="col-12">
                            <label for="priceTo">To:</label>
                            <input type="number" id="priceTo" name="priceTo" class="form-control">
                        </div>
                    </div>
                </div>
                <div>
                    <button class="btn btn-primary mt-3" onclick="filter()">Apply</button>
                </div>
                <!--FILTER END-->
            </div>
            <div class="col-12 col-md-8 offset-md-3">
                <!--SORT AND CATEGORY-->
                <div class="row"> <!--da opr margini na malka rez-->
                    <div class="col-sm-8">
                        <select class="form-select" id="selectCategory" onchange="changeCategory()" aria-label="Default select example">
                            <option selected>Choose category</option>
                            <option value="1">Racquets</option>
                            <option value="2">Dresses</option>
                            <option value="3">Shoes</option>
                        </select>
                    </div>
                    <div class="col-sm-4">
                        <select class="form-select" id="sort" onchange="sort()" aria-label="Default select example">
                            <option selected>Sort by</option>
                            <option value="1">Name ascending</option>
                            <option value="2">Name descending</option>
                            <option value="3">Price ascending</option>
                            <option value="4">Price descending</option>
                        </select>
                    </div>
                  </div>
                  <!--SORT AND CATEGORY END-->
                  <!--PRODUCT GRID-->
                <div id="products" class="mb-4"></div>
            </div>
            <div class="d-flex">
                <button class="col-12 btn btn-primary loadMore">Load More</button>
                <i class="fa-solid fa-arrow-up me-5 fs-2"></i>
            </div>
        </div>
        <!--FOOTER-->
        <div class="footer d-flex justify-content-center align-items-center bg-gray">
            <ul class="d-flex gap">
                    <li class="nav-item list-style-type-none">
                        <a class="nav-link active" aria-current="page" href="#">Contacts</a>
                    </li>
                    <li class="nav-item list-style-type-none">
                        <a class="nav-link" href="#">FAQ</a>
                    </li>
                    <li class="nav-item list-style-type-none">
                        <a class="nav-link" href="#">Privacy Policy</a>
                    </li>
            </ul>
        </div>
        <!--FOOTER END-->
    </div>
</body>

<script
  src="https://code.jquery.com/jquery-3.7.0.min.js"
  integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
  crossorigin="anonymous"></script>
<script>
    
    const products =
    [{name:"Racquet Begginer", category:"Racquets", price:10, image:'/images/tennis_2.png', color: "red", description: 'for starters', rating: 3},
    {name:"Racquet Intermediate", category:"Racquets", price:12, image:'/images/tennis_2.png', color: "red", description: 'medium', rating: 4},
    {name:"Racquet Pro", category:"Racquets", price:7, image:'/images/tennis_2.png', color: "red", description: 'expert choice', rating: 3},
    {name:"Racquet Special", category:"Racquets", price:19, image:'/images/tennis_2.png', color: "red", description: '2 in 1', rating: 5},
    {name:"Racquet Kids", category:"Racquets", price:53, image:'/images/tennis_2.png', color: "pink", description: 'smaller size', rating: 5},
    {name:"Racquet Mini", category:"Racquets", price:11, image:'/images/tennis_2.png', color: "pink", description: 'mini edition', rating: 5},
    {name:"Racquet Team", category:"Racquets", price:55, image:'/images/tennis_2.png', color: "yellow", description: 'team edition', rating: 4},
    {name:"Racquet Sport", category:"Racquets", price:57, image:'/images/tennis_2.png', color: "yellow", description: 'best choice', rating: 3}, /*da dobawq descr i rating*/
    {name:"Racquet Advanced", category:"Racquets", price:22, image:'/images/tennis_2.png', color: "yellow", description: 'not for amateurs', rating: 3},
    {name:"Dress Standard", category:"Dresses", price:22, image:'/images/tennis_dress.jpg', color: "yellow", description: 'mini edition', rating: 4},
    {name:"Dress Mini", category:"Dresses", price:92, image:'/images/tennis_dress_2.jpg', color: "yellow", description: 'casual', rating: 3},
    {name:"Dress Pro", category:"Dresses", price:78, image:'/images/tennis_dress.jpg', color: "pink", description: 'everyday choice', rating: 5},
    {name:"Dress Pro", category:"Dresses", price:82, image:'/images/tennis_dress_2.jpg', color: "pink", description: 'mini edition', rating: 3},
    {name:"Dress Standard", category:"Dresses", price:36, image:'/images/tennis_dress.jpg', color: "red", description: 'casual', rating: 3},
    {name:"Dress Mini", category:"Dresses", price:55, image:'/images/tennis_dress_2.jpg', color: "red", description: 'everyday choice', rating: 4},
    {name:"Trainers Pro", category:"Shoes", price:54, image:'/images/shoes_1.jpg', color: "yellow", description: 'everyday choice', rating: 3},
    {name:"Trainers Challenger", category:"Shoes", price:101, image:'/images/shoes_2.jpg', color: "yellow", description: 'casual', rating: 3},
    {name:"Trainers Sport", category:"Shoes", price:64, image:'/images/shoes_3.jpg', color: "pink", description: 'perfect for running from problems', rating: 4},
    {name:"Trainers Team", category:"Shoes", price:38, image:'/images/shoes_1.jpg', color: "pink", description: 'nitro on', rating: 3},
    {name:"Trainers Kids", category:"Shoes", price:23, image:'/images/shoes_2.jpg', color: "red", description: 'turbo mode', rating: 5},
    {name:"Trainers Mini", category:"Shoes", price:42, image:'/images/shoes_3.jpg', color: "red", description: 'faster than a comet', rating: 3}]

    function changeCategory(){

        clearForm(); //removes the sort and filter values
        let prods=changeCategoryProd();
        render(prods);

        $(".loadMore").show();
    }

    function changeCategoryProd(){
        let chosenCategory=$('#selectCategory option:selected').text();
        if(chosenCategory=="Choose category"){
            chosenCategory="Racquets";
        }
        let prods=products.filter(x=>x.category==chosenCategory);
        return prods;
    }
    
    function clearForm(){
       // $('input[type="radio"]:checked').attr("checked",false); -->how to uncheck radio button??
        $('#priceFrom').val("");
        $('#priceTo').val("");
        
        $("#sort option").prop("selected", function () {
            return this.defaultSelected;
        });
        }

    function sliceProducts(){
        $(".col-md-4:hidden").slice(0, 3).show(); //show 3 products of the grid
    }

    $(window).on('resize', function() {
    var win = $(this);
    if (win.width() > 767) {

        $('#filter-page').addClass('sticky-2');
        $('#filter-page').addClass('ms-5');
        $('#selectCategory').removeClass('ms-3');
        $('#products').removeClass('ms-3');
        $('#sort').removeClass('ms-3');

    } else {
        $('#filter-page').removeClass('sticky-2'); //to make the filter non-sticky for lower resolution
        $('#filter-page').removeClass('ms-5');
        $('#selectCategory').addClass('ms-3');
        $('#products').addClass('ms-3');
        $('#sort').addClass('ms-3');
    }
    });

    function render(products){
        let html='<div class="row mt-3 g-4">'; //s media da opr margins
            html+=`<div class="d-flex justify-content-between">`;
            html+=`<h2>${products[0].category}</h2>`;
            html+=`<span class="mb-4">${products.length} products</span>`;
            html+=`</div>`;    
            for(let i=0;i<products.length;i++){
                html+=`<div class="col-6 col-md-4">`;
                html+=`<div class="p-4" style="background-color:#f6f6f6">`;
                html+=`<i class="fa-solid fa-plus fs-5" style="cursor: pointer" onclick="add()"></i>`;
                html+=`<img src="${products[i].image}" class="img-fluid"/>`;
                html+=`<h5>${products[i].name}<h5/>`;
                html+=`<h6>${products[i].description}<h6/>`;
                html+=`<h6><span style="color: black">${products[i].price}</span> euro <h6/>`;
                html+=`</div>`;
                html+=`</div>`;
            }

            html+='</div>';
            $('#products').html(html);
            sliceProducts();
    }

     //showing 3 div

    $(".loadMore").on("click",function(){
    $(".col-md-4:hidden").slice(0, 3).show();//showing 3 hidden div on click
    
    if($(".col-md-4:hidden").length ==0)
    {
        $(".loadMore").fadeOut(); //this will hide
        //button when length is 0
    }
})

    
    $( ".fa-arrow-up" ).click(function() {
        var x = $(window).scrollTop();  
        $(window).scrollTop(x-1400);
        }); //for moving to the top of the page

    function add(){
        alert("Product added to cart!"); //activates when pressing the 'plus' sign
    }

    function sort(){
        prods=changeCategoryProd();
        prods=filterProds(prods);
        prods=sortProds(prods);
        if(prods.length>3){
            $(".loadMore").show();
        }
        render(prods);
    }

    function filter(){
        prods=changeCategoryProd();
        prods=sort(prods);
        prods=filterProds(prods);
        render(prods);
    }

    function sortProds(prods){
        let chosenSort=$('#sort option:selected').text();
        switch(chosenSort){
            case 'Name ascending':
                prods.sort((a,b) => (a.name > b.name) ? 1 : ((b.name > a.name) ? -1 : 0));
                break;
            case 'Name descending':
                prods.sort((a,b) => (b.name > a.name) ? 1 : ((a.name > b.name) ? -1 : 0));
                break;
            case 'Price ascending':
                prods.sort((a,b) => (a.price > b.price) ? 1 : ((b.price > a.price) ? -1 : 0));
                break;
            case 'Price descending':
                prods.sort((a,b) => (b.price > a.price) ? 1 : ((a.price > b.price) ? -1 : 0));
                break;
            default:
                prods.sort((a,b) => (a.name > b.name) ? 1 : ((b.name > a.name) ? -1 : 0));
                break;
        }
        return prods;
    }

    function filterProds(prods){
        let color=$('input[type="radio"]:checked').val();
        let priceFrom=$('#priceFrom').val();
        let priceTo=$('#priceTo').val();
        if(color!=undefined){
        prods=prods.filter(x=>x.color==color);
        }

        if(priceFrom!=''){
        prods=prods.filter(x=>x.price>=priceFrom);
        }

        if(priceTo!=''){
        prods=prods.filter(x=>x.price<=priceTo);
        }

        if(prods.length>3){
            $(".loadMore").show();
        }

        return prods;
    }

    function init(){
        let prods=products.filter(x=>x.category=="Racquets"); //the first category is loaded by default
        render(prods);
    }

    $(function(){
        init();
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
</html>

